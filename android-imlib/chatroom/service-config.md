---
title: 聊天室服务配置
sidebar_position: 10
---

# 聊天室服务配置

聊天室业务本身不需要单独申请开通，但部分聊天室服务需要在控制台开通与配置，例如**聊天室广播消息**、**聊天室消息云端存储**、以及与聊天室相关的回调地址等。

聊天室服务配置主要在融云控制台 IM 服务的 **功能配置** 和 **服务购买** 页面。

## 功能配置

以下是融云控制台 **IM 服务** > **功能配置** > **聊天室** 中提供的配置项：

- **单个用户加入多个聊天室**：默认一个用户只能加入一个聊天室中，开启后一个用户可以同时加入到多个聊天室中。
- **聊天室状态同步**：聊天室状态同步是融云提供的服务端回调服务，需同时提供可正常访问的回调地址。配置成功后，在应用下聊天室发生状态变化时，将实时同步到开发者的应用服务器地址，目前支持的同步状态包括：创建、销毁、成员加入、成员退出聊天室。详见 IM 服务端文档「聊天室管理」下的[聊天室状态同步]。
- **加入聊天室获取指定消息设置**：默认加入聊天室时可最多获取全部消息类型的最近 50 条消息，开启后可设置指定消息类型获取。
- **聊天室属性自定义设置**：可在指定聊天室中设置自定义属性，用于语音直播聊天室场景的会场属性同步或狼人杀等卡牌类游戏场景中记录用户的角色和牌局状态等，详见「聊天室业务」下的**聊天室属性管理（KV）**文档。如果 App 业务服务端需要融云提供聊天室属性变更数据同步，需要提供可正常访问的回调地址，配置成功后，自动开启融云提供的服务端回调服务，详见 IM 服务端文档「聊天室管理」下的[聊天室属性同步]。
- **SDK 用户不在聊天室中不能发送消息**：默认情况下，用户未加入聊天室时可以向聊天室中发送消息。开启后，不在聊天室的用户不能通过客户端 SDK 在该聊天室发送消息。**注意**：服务端发送聊天室消息的接口不受此配置影响。
- **多端同时在线情况下，一端退出聊天室其他端也同步退出聊天室**：用户多端同时在线且都加入了同一聊天室时，默认情况一端退出聊天室后其他端不退出。开启此功能后多端在线情况下，如果需要一端退出后，其他端也退出聊天室。

访问控制台 IM 服务的[功能配置]页面，可调整聊天室业务相关的配置。

## 服务购买

下文为控制台 IM 服务的[服务购买]页面中与聊天室业务相关的增值服务配置。

> 开发环境下可以免费使用。生产环境下，**IM 旗舰版**或 **IM 尊享版**才能使用以下服务。

- **聊天室广播消息**：向应用中的所有聊天室发送一条消息，单条消息最大 128k。详见 IM 服务端文档「消息管理」下的[发送全体聊天室广播消息]。
- **聊天室全局禁言功能**：当不想让某一用户在所有聊天室中发言时，可将此用户添加到聊天室全局禁言中，被禁言用户可接收查看聊天室中用户聊天信息，但不能发送消息。详见 IM 服务端文档「聊天室用户管理」下的[全局禁言用户]。
- **聊天室消息优先级服务**：在指定聊天室中设置指定类型的消息为低级别消息。当服务器负载高时低级别消息优先被丢弃，这样可以确保重要的消息不被丢弃。详见 IM 服务端文档「聊天室消息优先级服务」下的[添加低级别消息]。
- **聊天室白名单服务**：开通后，可以使用以下功能对应的 Server API：
    - [聊天室用户白名单]：可用于保护指定聊天室中的重要用户，支持按聊天室设置白名单用户。例如，App 业务中指定聊天室中的管理员、主播等重要角色的用户。
    - [聊天室消息白名单]：可用于保护 App 下所有聊天室中的指定消息类型。例如 App 业务中自定义的红包消息。
- **聊天室保活服务**：聊天室具有自动销毁机制，默认 1 个小时内无用户加入或发送消息，会自动将聊天室内所有成员踢出并销毁聊天室。保活的聊天室不会被自动销毁，可以调用 API 接口销毁聊天室。详见 IM 服务端文档「聊天室管理」下的[保活聊天室]。
- **聊天室消息云端存储**：聊天消息保存在云端，用户进入聊天室后，可以查看聊天室中以前的消息，历史消息默认保存 2 个月。





<!-- links -->
[功能配置]: https://console.rongcloud.cn/agile/im/service/config
[服务购买]: https://console.rongcloud.cn/agile/im/service/purchase
[聊天室用户白名单]: /platform-chat-api/chatroom/whitelist/add-to-user-whitelist
[聊天室消息白名单]: /platform-chat-api/chatroom/whitelist/add-to-message-type-whitelist
[全局禁言用户]: /platform-chat-api/chatroom/mute/gag-user-globally
[发送全体聊天室广播消息]: /platform-chat-api/message/send-chatroom-broadcast
[保活聊天室]: /platform-chat-api/chatroom/keep-alive/add-to-keep-alive
[添加低级别消息]: /platform-chat-api/chatroom/message-priority/add-low-priority-message-type
[聊天室状态同步]: /platform-chat-api/chatroom/status
[聊天室属性同步]: /platform-chat-api/chatroom/kv-attribute/sync-kv

